<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆìŒ ë¹„ë²• ë ˆì‹œí”¼ ì¹´ë“œ ë§Œë“¤ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            body * { visibility: hidden; }
            #resultCard, #resultCard * { visibility: visible; }
            #resultCard {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 1rem;
                border: none !important;
                box-shadow: none !important;
            }
            .no-print { display: none; }
        }
    </style>
</head>
<body class="bg-amber-50 flex items-center justify-center min-h-screen p-4 sm:p-6 font-sans">

    <div class="w-full max-w-3xl mx-auto">
        <div id="mainFormContainer" class="bg-white rounded-2xl shadow-lg p-6 sm:p-10 space-y-8 border-4 border-amber-100">
            <header class="text-center">
                <h1 class="text-3xl sm:text-4xl font-bold text-orange-800">ë§ˆìŒ ë¹„ë²• ë ˆì‹œí”¼ ì¹´ë“œ ğŸ³ğŸ’–</h1>
                <p class="text-gray-500 mt-2">ë‚˜ë¥¼ ìœ„í•œ ë§›ìˆëŠ” ë§ˆìŒ ìš”ë¦¬ë¥¼ ë§Œë“¤ì–´ ë³´ì•„ìš”!</p>
            </header>

            <form id="recipeForm" class="space-y-8">
                <div>
                    <label for="mindFood" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ² 1. ì˜¤ëŠ˜ì˜ ë§ˆìŒ ìƒíƒœëŠ”?</label>
                    <p class="text-sm text-gray-500 mb-3">(ì˜ˆ: ì‹œí¼í•œ ë ˆëª¬ğŸ‹, ëœ¨ê±°ìš´ ê³ ì¶”ì¥ì°Œê°œğŸ”¥)</p>
                    <input type="text" id="mindFood" name="mindFood" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent transition" placeholder="ë‚´ ë§ˆìŒì„ ìŒì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´...">
                </div>

                <div>
                    <label for="reason" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ” 2. ë§ˆìŒì´ ì´ë ‡ê²Œ ëœ ì´ìœ ëŠ”?</label>
                    <textarea id="reason" name="reason" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent transition" placeholder="ì–´ë–¤ ì¼ì´ ìˆì—ˆëŠ”ì§€ ê°„ë‹¨íˆ ì ì–´ë³´ì•„ìš”."></textarea>
                </div>

                <div>
                    <label class="text-xl font-semibold text-gray-800 block mb-3">ğŸ§‚ 3. ë§ˆìŒì„ ë‹¤ìŠ¤ë¦¬ëŠ” ì¬ë£Œë¥¼ ëª¨ì•„ë³´ì!</label>
                    <div id="ingredientsContainer" class="space-y-3">
                        </div>
                    <button type="button" id="addIngredientBtn" class="mt-3 bg-amber-200 hover:bg-amber-300 text-amber-800 font-bold py-2 px-4 rounded-lg transition-transform duration-200 hover:scale-105">
                        + ì¬ë£Œ ì¶”ê°€í•˜ê¸°
                    </button>
                </div>

                <div>
                    <label for="recipeName" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ½ï¸ 4. ë‚˜ë§Œì˜ ë§ˆìŒ ë ˆì‹œí”¼ ì´ë¦„ì€?</label>
                    <p class="text-sm text-gray-500 mb-3">(ì˜ˆ: ë§ˆìŒ ì§„ì • ìˆ˜í”„, ê¸°ë¶„ ì—…! ì´ˆì½”ì¼€ì´í¬)</p>
                    <input type="text" id="recipeName" name="recipeName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent transition" placeholder="ë‚˜ë§Œì˜ ë©‹ì§„ ë ˆì‹œí”¼ ì´ë¦„ì„ ì§€ì–´ì£¼ì„¸ìš”!">
                </div>
                
                <div>
                    <label for="method" class="text-xl font-semibold text-gray-800 block mb-2">âœ¨ 5. ì™„ì„±ëœ ë§ˆìŒ ë¹„ë²• ë ˆì‹œí”¼ë¥¼ ì†Œê°œí•´ë³´ì!</label>
                    <textarea id="method" name="method" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-transparent transition" placeholder="ë ˆì‹œí”¼ ë§Œë“œëŠ” ë°©ë²•ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”."></textarea>
                </div>

                <div>
                    <label class="text-xl font-semibold text-gray-800 block mb-3">ğŸ¨ 6. ë‚˜ì˜ ë ˆì‹œí”¼ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•´ë³´ì!</label>
                    <label for="recipeImage" class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-5 rounded-lg border-2 border-dashed border-gray-300 text-center block transition">
                        ğŸ–¼ï¸ ë‚´ ì»´í“¨í„°ì—ì„œ ê·¸ë¦¼ íŒŒì¼ ì„ íƒí•˜ê¸°
                    </label>
                    <input type="file" id="recipeImage" name="recipeImage" class="hidden" accept="image/*">
                    <img id="imagePreview" class="mt-4 rounded-lg max-w-xs mx-auto" src="" alt="ì„ íƒí•œ ê·¸ë¦¼ ë¯¸ë¦¬ë³´ê¸°">
                </div>

                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <button type="button" id="submitBtn" class="w-full sm:w-2/3 bg-orange-400 hover:bg-orange-500 text-white font-bold py-3 px-6 rounded-lg transition-transform duration-200 hover:scale-105 shadow-md">
                        ë‚˜ì˜ ë ˆì‹œí”¼ ì¹´ë“œ ì™„ì„±!
                    </button>
                    <button type="button" id="resetBtn" class="w-full sm:w-1/3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg transition-transform duration-200 hover:scale-105 shadow-md">
                        ìƒˆë¡œ ë§Œë“¤ê¸°
                    </button>
                </div>
            </form>
        </div>

        <div id="resultCard" class="hidden">
            <div id="resultContent" class="bg-white rounded-2xl shadow-lg p-6 sm:p-10 mt-10 border-4 border-dashed border-amber-300 space-y-6"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const recipeForm = document.getElementById('recipeForm');
            const submitBtn = document.getElementById('submitBtn');
            const resetBtn = document.getElementById('resetBtn');
            const resultCard = document.getElementById('resultCard');
            const resultContent = document.getElementById('resultContent');
            const addIngredientBtn = document.getElementById('addIngredientBtn');
            const ingredientsContainer = document.getElementById('ingredientsContainer');
            const recipeImageInput = document.getElementById('recipeImage');
            const imagePreview = document.getElementById('imagePreview');

            // ì¬ë£Œ ì¶”ê°€ ë¡œì§
            addIngredientBtn.addEventListener('click', () => {
                const ingredientId = Date.now(); // ê³ ìœ  ID ìƒì„±
                const newIngredient = document.createElement('div');
                newIngredient.id = `ingredient-${ingredientId}`;
                newIngredient.className = 'flex items-center gap-2';
                newIngredient.innerHTML = `
                    <input type="text" name="ingredientName" class="flex-1 p-2 border border-gray-300 rounded-md" placeholder="ì¬ë£Œ ì´ë¦„ (ì˜ˆ: ì¢‹ì•„í•˜ëŠ” ìŒì•…)">
                    <input type="text" name="ingredientEffect" class="flex-1 p-2 border border-gray-300 rounded-md" placeholder="íš¨ê³¼ (ì˜ˆ: ê¸°ë¶„ì´ ë°ì•„ì ¸ìš”)">
                    <button type="button" class="remove-ingredient-btn bg-red-500 text-white w-8 h-8 rounded-md hover:bg-red-600 font-bold">X</button>
                `;
                ingredientsContainer.appendChild(newIngredient);
            });

            // ì¬ë£Œ ì‚­ì œ ë¡œì§ (ì´ë²¤íŠ¸ ìœ„ì„)
            ingredientsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('remove-ingredient-btn')) {
                    e.target.parentElement.remove();
                }
            });

            // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë¡œì§
            recipeImageInput.addEventListener('change', () => {
                const file = recipeImageInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        imagePreview.src = e.target.result;
                        imagePreview.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreview.src = "";
                    imagePreview.classList.add('hidden');
                }
            });

            // ë¦¬ì…‹ ë²„íŠ¼ ë¡œì§
            resetBtn.addEventListener('click', () => {
                recipeForm.reset();
                ingredientsContainer.innerHTML = '';
                imagePreview.src = '';
                imagePreview.classList.add('hidden');
                resultCard.classList.add('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // ë ˆì‹œí”¼ ì¹´ë“œ ë§Œë“¤ê¸° ë²„íŠ¼ ë¡œì§
            submitBtn.addEventListener('click', () => {
                const formData = new FormData(recipeForm);
                const data = {};
                for (let [key, value] of formData.entries()) {
                    data[key] = value;
                }
                
                const ingredients = Array.from(ingredientsContainer.children).map(row => ({
                    name: row.querySelector('input[name="ingredientName"]').value,
                    effect: row.querySelector('input[name="ingredientEffect"]').value
                })).filter(ing => ing.name); // ì´ë¦„ì´ ìˆëŠ” ì¬ë£Œë§Œ í¬í•¨

                if (!data.mindFood || !data.reason || ingredients.length === 0 || !data.recipeName || !data.method) {
                    alert('ë¹ˆì¹¸ì„ ëª¨ë‘ ì±„ì›Œì£¼ì„¸ìš”! ì¬ë£ŒëŠ” 1ê°œ ì´ìƒ í•„ìš”í•´ìš”. ğŸ˜Š');
                    return;
                }

                const ingredientsHtml = ingredients.map(ing => `
                    <li class="flex items-start">
                        <span class="font-bold text-orange-600 w-24">${ing.name}:</span>
                        <span class="flex-1">${ing.effect}</span>
                    </li>
                `).join('');

                const imageHtml = imagePreview.src ? `<img src="${imagePreview.src}" alt="ë‚˜ì˜ ë ˆì‹œí”¼ ê·¸ë¦¼" class="my-4 rounded-lg max-w-sm mx-auto shadow-md">` : '';

                resultContent.innerHTML = `
                    <div class="text-center">
                        <h2 class="text-3xl font-bold text-orange-800">${data.recipeName}</h2>
                        <p class="text-gray-500 mt-1">ë‚˜ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ ë§ˆìŒ ìš”ë¦¬</p>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-semibold text-lg text-amber-700">ğŸ³ ì˜¤ëŠ˜ì˜ ë§ˆìŒ ìŒì‹</h3>
                            <p class="bg-amber-50 p-3 rounded-lg mt-1">${data.mindFood} (ì´ìœ : ${data.reason})</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-amber-700">ğŸ§‚ ë§ˆìŒ ë ˆì‹œí”¼ ì¬ë£Œ</h3>
                            <ul class="bg-amber-50 p-3 rounded-lg mt-1 list-none space-y-2">${ingredientsHtml}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-amber-700">âœ¨ ë§Œë“œëŠ” ë°©ë²•</h3>
                            <p class="bg-amber-50 p-3 rounded-lg mt-1 whitespace-pre-wrap">${data.method}</p>
                        </div>
                        ${imageHtml ? `<div><h3 class="font-semibold text-lg text-amber-700 text-center">ğŸ¨ ì™„ì„±ëœ ë‚˜ì˜ ìš”ë¦¬!</h3>${imageHtml}</div>` : ''}
                    </div>
                    <div class="mt-8 text-center no-print">
                        <button type="button" id="printBtn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-5 rounded-lg transition-transform duration-200 hover:scale-105 shadow">
                            ğŸ–¨ï¸ ì¸ì‡„ / PDFë¡œ ì €ì¥
                        </button>
                    </div>
                `;

                resultCard.classList.remove('hidden');
                resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });

                document.getElementById('printBtn')?.addEventListener('click', () => window.print());
            });
        });
    </script>
</body>
</html>